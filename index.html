<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSight AI - Pro</title>
    
    <!-- React 全家桶 -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 样式与图标 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chart.js (使用 3.x 版本以保证 CDN 兼容性) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: #f8fafc; }
        
        /* 动画定义 */
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slide-in { animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }

        /* 滚动条美化 */
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // 1. 数据配置 (SCENARIOS) - 增强版
        // ==========================================
        const SCENARIOS = {
            'correlation': {
                id: 'correlation',
                title: "RB vs 铁矿 相关性分析",
                desc: "计算螺纹钢与铁矿石历史价格的相关系数，并绘制价差序列。",
                query: "获取过去3年螺纹钢(RB)和铁矿石(I)的主力合约收盘价，计算相关性并绘制价差图。",
                summary: "分析完成。RB 与 I 的相关性系数为 **0.87** (高度正相关)。\n图中蓝色区域为标准化后的价差，当前价差处于历史 **85% 分位**，意味着螺纹钢相对铁矿石价格偏高，可能存在回归需求。",
                chartConfig: (ctx) => {
                    const gradientRb = ctx.createLinearGradient(0, 0, 0, 400);
                    gradientRb.addColorStop(0, 'rgba(59, 130, 246, 0.2)');
                    gradientRb.addColorStop(1, 'rgba(59, 130, 246, 0.0)');

                    return {
                        type: 'line',
                        data: {
                            labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月'],
                            datasets: [
                                {
                                    label: '螺纹钢 (左轴)',
                                    data: [3800, 3950, 4100, 4050, 3700, 3650, 3750, 3820, 3900, 3850],
                                    borderColor: '#3b82f6',
                                    backgroundColor: gradientRb,
                                    fill: true,
                                    yAxisID: 'y',
                                    tension: 0.4
                                },
                                {
                                    label: '铁矿石 (右轴)',
                                    data: [820, 850, 880, 860, 750, 720, 780, 810, 840, 830],
                                    borderColor: '#ef4444',
                                    backgroundColor: 'transparent',
                                    borderDash: [5, 5],
                                    yAxisID: 'y1',
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            interaction: { mode: 'index', intersect: false },
                            scales: {
                                y: { type: 'linear', display: true, position: 'left', grid: { display: false } },
                                y1: { type: 'linear', display: true, position: 'right', grid: { display: false } }
                            }
                        }
                    };
                },
                pythonCode: `import pandas as pd\nfrom finsight_mcp import get_kline\n\n# 1. 获取数据\nrb = get_kline('SHFE.rb_main', '2023-01-01', '2023-10-01')\ni = get_kline('DCE.i_main', '2023-01-01', '2023-10-01')\n\n# 2. 合并与计算\ndf = pd.merge(rb, i, on='date')\ncorr = df['close_rb'].corr(df['close_i'])\nprint(f"Correlation: {corr}")\n\n# 3. 绘图逻辑 (略)...`
            },
            'backtest': {
                id: 'backtest',
                title: "股指期货隔夜策略",
                desc: "验证‘收盘买入次日开盘卖出’策略在 IF 上的长期表现。",
                query: "回测 IF 股指期货：每天收盘买入，次日开盘卖出，计算累计收益率。",
                summary: "回测显示该策略具有**正期望值**。累计收益率 **12.4%**，最大回撤 **-3.2%**。\n曲线呈阶梯状上升，表明隔夜风险溢价在 A 股市场长期存在。",
                chartConfig: (ctx) => {
                    const gradientRet = ctx.createLinearGradient(0, 0, 0, 400);
                    gradientRet.addColorStop(0, 'rgba(16, 185, 129, 0.4)');
                    gradientRet.addColorStop(1, 'rgba(16, 185, 129, 0.0)');
                    return {
                        type: 'line',
                        data: {
                            labels: Array.from({length: 20}, (_, i) => `Day ${i*5}`),
                            datasets: [{
                                label: '累计净值',
                                data: [1.0, 1.01, 1.005, 1.02, 1.03, 1.025, 1.04, 1.05, 1.06, 1.055, 1.07, 1.08, 1.09, 1.085, 1.10, 1.11, 1.12, 1.115, 1.13, 1.124],
                                borderColor: '#10b981',
                                backgroundColor: gradientRet,
                                fill: true,
                                tension: 0.3,
                                pointRadius: 2
                            }]
                        },
                        options: {
                            plugins: { legend: { display: false }, title: { display: true, text: '策略累计净值曲线' } }
                        }
                    };
                },
                pythonCode: `df['ret_overnight'] = df['open'].shift(-1) / df['close'] - 1\ndf['cum_nav'] = (1 + df['ret_overnight']).cumprod()`
            },
            'ma_strategy': {
                id: 'ma_strategy',
                title: "均线支撑有效性",
                desc: "统计过去一年回踩 20日均线不破的成功率。",
                query: "分析螺纹钢主力合约，统计回踩 MA20 且未跌破的次数及后续涨幅。",
                summary: "识别到 **8次** 有效支撑。其中 6 次后续 3 天内上涨，胜率 **75%**。\n黄色点代表回踩信号，绿色线为 MA20 趋势线。",
                chartConfig: (ctx) => ({
                    type: 'line',
                    data: {
                        labels: ['T-40', 'T-35', 'T-30', 'T-25', 'T-20', 'T-15', 'T-10', 'T-5', 'Now'],
                        datasets: [
                            {
                                label: '收盘价',
                                data: [3600, 3650, 3620, 3680, 3750, 3720, 3800, 3850, 3820],
                                borderColor: '#94a3b8',
                                borderWidth: 1,
                                pointRadius: 0
                            },
                            {
                                label: 'MA20',
                                data: [3580, 3600, 3610, 3640, 3680, 3710, 3750, 3780, 3800],
                                borderColor: '#f59e0b', // Amber
                                borderWidth: 2,
                                pointRadius: 0
                            },
                            {
                                label: '回踩信号',
                                type: 'scatter',
                                data: [
                                    {x: 'T-30', y: 3620},
                                    {x: 'T-15', y: 3720}
                                ],
                                backgroundColor: '#ef4444',
                                pointRadius: 6,
                                pointHoverRadius: 8
                            }
                        ]
                    }
                }),
                pythonCode: `df['ma20'] = df['close'].rolling(20).mean()\n# 判定条件：Low < MA20 * 1.005 and Close > MA20\nsignals = df[(df['low'] <= df['ma20']*1.005) & (df['close'] > df['ma20'])]`
            },
            'seasonality': {
                id: 'seasonality',
                title: "纯碱季节性分析",
                desc: "对比过去3年纯碱(SA)在不同月份的平均涨跌幅。",
                query: "绘制纯碱期货的月度季节性走势图。",
                summary: "纯碱呈现明显的**“金九银十”**特征。\n9月平均涨幅最大 (+5.2%)，而 6月 通常为淡季回调期。建议关注 8 月底的做多机会。",
                chartConfig: (ctx) => ({
                    type: 'bar',
                    data: {
                        labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                        datasets: [{
                            label: '月度平均涨幅 (%)',
                            data: [1.2, -0.5, -2.1, 0.8, 1.5, -3.2, 0.5, 2.1, 5.2, 3.8, 1.1, -0.9],
                            backgroundColor: (ctx) => {
                                const val = ctx.raw;
                                return val >= 0 ? 'rgba(16, 185, 129, 0.7)' : 'rgba(239, 68, 68, 0.7)';
                            },
                            borderRadius: 4
                        }]
                    },
                    options: {
                        plugins: { legend: { display: false } }
                    }
                }),
                pythonCode: `df['month'] = df['date'].dt.month\nmonthly_ret = df.groupby('month')['pct_chg'].mean()`
            }
        };

        // ==========================================
        // 2. 独立组件：图表渲染器 (Canvas Wrapper)
        // ==========================================
        const ChartView = ({ scenario }) => {
            const canvasRef = useRef(null);
            const chartInstanceRef = useRef(null);

            useEffect(() => {
                if (!canvasRef.current || !scenario) return;

                // 销毁旧图表
                if (chartInstanceRef.current) {
                    chartInstanceRef.current.destroy();
                }

                // 获取 Canvas Context
                const ctx = canvasRef.current.getContext('2d');
                
                // 获取配置 (支持函数式配置以使用 Context 创建渐变)
                const config = typeof scenario.chartConfig === 'function' 
                    ? scenario.chartConfig(ctx) 
                    : scenario.chartConfig;

                // 创建新图表
                chartInstanceRef.current = new Chart(ctx, {
                    ...config,
                    options: {
                        ...config.options,
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: { duration: 1000, easing: 'easeOutQuart' },
                        plugins: {
                            ...config.options?.plugins,
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(255, 255, 255, 0.9)',
                                titleColor: '#1e293b',
                                bodyColor: '#475569',
                                borderColor: '#e2e8f0',
                                borderWidth: 1,
                                padding: 10
                            }
                        }
                    }
                });

                return () => {
                    if (chartInstanceRef.current) chartInstanceRef.current.destroy();
                };
            }, [scenario]);

            return <canvas ref={canvasRef} />;
        };

        // ==========================================
        // 3. 独立组件：灵感卡片
        // ==========================================
        const InspirationCard = ({ icon, title, desc, onClick, color }) => (
            <div 
                onClick={onClick}
                className="group relative bg-white p-5 rounded-2xl border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 cursor-pointer overflow-hidden"
            >
                <div className={`absolute top-0 right-0 w-16 h-16 bg-${color}-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}></div>
                <div className="relative z-10">
                    <div className={`w-12 h-12 rounded-xl bg-${color}-100 text-${color}-600 flex items-center justify-center mb-4 text-xl shadow-inner`}>
                        <i className={`fas ${icon}`}></i>
                    </div>
                    <h3 className="font-bold text-gray-800 text-lg mb-2 group-hover:text-blue-600 transition-colors">{title}</h3>
                    <p className="text-sm text-gray-500 leading-relaxed">{desc}</p>
                </div>
            </div>
        );

        // ==========================================
        // 4. 主程序 App
        // ==========================================
        const App = () => {
            const initialMsg = [{ role: 'ai', content: '你好！我是 FinSight。请从下方选择一个分析场景，或直接输入你的想法。' }];
            const [messages, setMessages] = useState(initialMsg);
            const [currentScenario, setCurrentScenario] = useState(null);
            const [viewMode, setViewMode] = useState('chart'); 
            const [isThinking, setIsThinking] = useState(false);
            const [showDashboard, setShowDashboard] = useState(false);

            // 回到首页 (核心交互增强)
            const goHome = () => {
                setShowDashboard(false);
                setTimeout(() => {
                    setMessages(initialMsg);
                    setCurrentScenario(null);
                    setIsThinking(false);
                    setViewMode('chart');
                }, 300); // 等待 dashboard 动画消失
            };

            // 模拟执行流程
            const runScenario = (key) => {
                const sc = SCENARIOS[key];
                
                // 1. 用户提问
                setMessages(prev => [...prev, { role: 'user', content: sc.query }]);
                setIsThinking(true);

                // 2. 模拟链式反应
                setTimeout(() => setMessages(prev => [...prev, { role: 'ai', type: 'loading' }]), 400);

                setTimeout(() => {
                    // 替换 loading 为过程日志
                    setMessages(prev => {
                        const next = [...prev];
                        next.pop();
                        next.push({ role: 'ai', type: 'log', content: `正在获取 ${sc.title.split(' ')[0]} 历史数据 (MCP)...` });
                        return next;
                    });
                }, 1500);

                setTimeout(() => {
                    setMessages(prev => {
                        const next = [...prev];
                        next.push({ role: 'ai', type: 'log', content: `正在执行 Python 回测脚本...` });
                        return next;
                    });
                }, 2500);

                setTimeout(() => {
                    setMessages(prev => {
                        const next = [...prev];
                        next.push({ role: 'ai', content: sc.summary });
                        return next;
                    });
                    setCurrentScenario(sc);
                    setShowDashboard(true);
                    setIsThinking(false);
                }, 3500);
            };

            return (
                <div className="flex h-screen w-full overflow-hidden bg-slate-50">
                    
                    {/* 左侧边栏 (导航 + 历史) */}
                    <aside className="w-20 md:w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 z-20">
                        {/* LOGO区域 - 点击回家 */}
                        <div 
                            onClick={goHome}
                            className="h-16 flex items-center justify-center md:justify-start md:px-6 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors group"
                            title="点击回到首页"
                        >
                            <div className="w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-200 group-hover:scale-105 transition-transform">
                                <i className="fas fa-chart-simple"></i>
                            </div>
                            <span className="hidden md:block ml-3 font-bold text-gray-800 text-lg">FinSight</span>
                        </div>

                        {/* 导航菜单 */}
                        <div className="flex-1 py-6 flex flex-col gap-2 px-3">
                            <div className="hidden md:block text-xs font-semibold text-gray-400 px-3 mb-2">最近分析</div>
                            {Object.values(SCENARIOS).map((sc, idx) => (
                                <div key={sc.id} onClick={() => runScenario(sc.id)} 
                                     className={`flex items-center p-3 rounded-xl cursor-pointer transition-all ${currentScenario?.id === sc.id ? 'bg-blue-50 text-blue-700 font-medium' : 'hover:bg-gray-50 text-gray-600'}`}>
                                    <div className="w-6 text-center"><i className={`fas fa-${idx === 0 ? 'link' : idx === 1 ? 'chart-line' : idx === 2 ? 'crosshairs' : 'calendar-alt'}`}></i></div>
                                    <span className="hidden md:block ml-2 text-sm truncate">{sc.title}</span>
                                </div>
                            ))}
                        </div>

                        {/* 底部用户 */}
                        <div className="p-4 border-t border-gray-100">
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-purple-500 to-pink-500"></div>
                                <div className="hidden md:block">
                                    <div className="text-sm font-medium text-gray-700">User Pro</div>
                                    <div className="text-xs text-gray-400">API Connected</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* 主区域 */}
                    <main className="flex-1 flex relative">
                        
                        {/* 中间对话区 */}
                        <div className="flex-1 flex flex-col min-w-0 bg-slate-50/50">
                            {/* 聊天记录 */}
                            <div className="flex-1 overflow-y-auto p-4 md:p-8 custom-scroll">
                                <div className="max-w-3xl mx-auto space-y-6 pb-20">
                                    {messages.map((msg, idx) => (
                                        <div key={idx} className={`flex w-full ${msg.role === 'ai' ? 'justify-start' : 'justify-end'} animate-fade-in`}>
                                            <div className={`flex max-w-[90%] md:max-w-[80%] gap-3 ${msg.role === 'user' ? 'flex-row-reverse' : ''}`}>
                                                {/* 头像 */}
                                                <div className={`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center text-xs ${msg.role === 'ai' ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-600'}`}>
                                                    <i className={`fas fa-${msg.role === 'ai' ? 'robot' : 'user'}`}></i>
                                                </div>
                                                
                                                {/* 气泡内容 */}
                                                <div className={`p-4 rounded-2xl text-sm leading-relaxed shadow-sm ${
                                                    msg.role === 'ai' 
                                                    ? 'bg-white border border-gray-100 text-gray-800 rounded-tl-none' 
                                                    : 'bg-blue-600 text-white rounded-tr-none'
                                                }`}>
                                                    {msg.type === 'loading' ? (
                                                        <div className="flex gap-1 py-1 px-1">
                                                            <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                                            <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                                            <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                                        </div>
                                                    ) : msg.type === 'log' ? (
                                                        <div className="flex items-center gap-2 text-blue-600">
                                                            <i className="fas fa-circle-notch fa-spin text-xs"></i>
                                                            <span>{msg.content}</span>
                                                        </div>
                                                    ) : (
                                                        <div dangerouslySetInnerHTML={{ __html: msg.content.replace(/\n/g, '<br/>').replace(/\*\*(.*?)\*\*/g, '<b>$1</b>') }} />
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* 底部输入框 */}
                            <div className="p-4 md:p-6 bg-white/80 backdrop-blur border-t border-gray-200 z-10">
                                <div className="max-w-3xl mx-auto relative group">
                                    <input 
                                        type="text" 
                                        disabled={isThinking}
                                        placeholder="输入你的交易想法，例如：'螺纹钢季节性分析'..." 
                                        className="w-full pl-5 pr-14 py-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:bg-white transition-all shadow-sm"
                                    />
                                    <button className="absolute right-3 top-3 w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center hover:bg-blue-700 shadow-md shadow-blue-200 transition-transform active:scale-95">
                                        <i className="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>

                            {/* 灵感墙 Overlay (仅在初始状态显示) */}
                            {!showDashboard && !isThinking && messages.length <= 1 && (
                                <div className="absolute inset-0 bg-slate-50 z-0 flex flex-col items-center justify-center p-6 animate-fade-in">
                                    <div className="text-center mb-10">
                                        <div className="inline-block p-2 bg-blue-50 text-blue-600 rounded-lg mb-4 text-xs font-bold tracking-wider uppercase">AI Powered Quantitative Analysis</div>
                                        <h1 className="text-3xl md:text-4xl font-extrabold text-gray-800 mb-4">你的想法，数据的答案。</h1>
                                        <p className="text-gray-500 max-w-lg mx-auto">无需编程，FinSight 帮你用历史数据验证每一个交易直觉。</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-5 max-w-4xl w-full">
                                        <InspirationCard 
                                            icon="fa-link" title="RB vs I 相关性" color="blue"
                                            desc="黑色系品种联动分析，寻找价差回归机会。"
                                            onClick={() => runScenario('correlation')}
                                        />
                                        <InspirationCard 
                                            icon="fa-chart-area" title="股指隔夜回测" color="purple"
                                            desc="实证 A 股是否存在显著的隔夜持仓溢价。"
                                            onClick={() => runScenario('backtest')}
                                        />
                                        <InspirationCard 
                                            icon="fa-crosshairs" title="均线支撑验证" color="amber"
                                            desc="统计回踩 20日均线不破的胜率与盈亏比。"
                                            onClick={() => runScenario('ma_strategy')}
                                        />
                                        <InspirationCard 
                                            icon="fa-calendar-alt" title="纯碱季节性" color="emerald"
                                            desc="月度涨跌幅热力统计，发现金九银十规律。"
                                            onClick={() => runScenario('seasonality')}
                                        />
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* 右侧：结果仪表盘 (Slide-over Dashboard) */}
                        {showDashboard && currentScenario && (
                            <div className="absolute md:relative inset-0 md:inset-auto md:w-[500px] bg-white border-l border-gray-200 shadow-2xl z-30 flex flex-col animate-slide-in">
                                {/* 顶部工具栏 */}
                                <div className="h-16 border-b border-gray-100 flex items-center justify-between px-5 bg-white flex-shrink-0">
                                    <div className="flex items-center gap-2">
                                        <div className="text-green-500 animate-pulse"><i className="fas fa-circle text-[8px]"></i></div>
                                        <h3 className="font-bold text-gray-800">分析结果</h3>
                                    </div>
                                    <div className="flex bg-gray-100 p-1 rounded-lg">
                                        <button onClick={() => setViewMode('chart')} className={`px-3 py-1.5 text-xs rounded-md font-medium transition-all ${viewMode === 'chart' ? 'bg-white shadow text-blue-600' : 'text-gray-500'}`}>
                                            图表
                                        </button>
                                        <button onClick={() => setViewMode('code')} className={`px-3 py-1.5 text-xs rounded-md font-medium transition-all ${viewMode === 'code' ? 'bg-white shadow text-blue-600' : 'text-gray-500'}`}>
                                            Python
                                        </button>
                                    </div>
                                </div>

                                {/* 内容滚动区 */}
                                <div className="flex-1 overflow-y-auto custom-scroll bg-gray-50/50 p-5">
                                    {viewMode === 'chart' ? (
                                        <div className="space-y-5 animate-fade-in">
                                            {/* 图表卡片 */}
                                            <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 h-80 relative">
                                                <ChartView scenario={currentScenario} />
                                            </div>

                                            {/* AI 结论 */}
                                            <div className="bg-indigo-50/50 border border-indigo-100 p-5 rounded-2xl">
                                                <div className="flex items-center gap-2 mb-3 text-indigo-700 font-bold text-sm">
                                                    <i className="fas fa-robot"></i> 智能洞察
                                                </div>
                                                <p className="text-sm text-gray-700 leading-relaxed whitespace-pre-wrap">
                                                    {currentScenario.summary.replace(/\*\*/g, '')}
                                                </p>
                                            </div>

                                            {/* 关键指标 Grid */}
                                            <div className="grid grid-cols-2 gap-3">
                                                <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                                    <div className="text-xs text-gray-400 mb-1 uppercase tracking-wider">数据完整度</div>
                                                    <div className="text-lg font-bold text-gray-800">99.8%</div>
                                                </div>
                                                <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                                    <div className="text-xs text-gray-400 mb-1 uppercase tracking-wider">耗时</div>
                                                    <div className="text-lg font-bold text-gray-800">1.2s</div>
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="animate-fade-in h-full flex flex-col">
                                            <div className="bg-[#1e293b] rounded-xl overflow-hidden shadow-lg border border-gray-700 flex-1 flex flex-col">
                                                <div className="bg-[#0f172a] px-4 py-2 flex items-center justify-between border-b border-gray-700">
                                                    <span className="text-xs text-gray-400 font-mono">analysis_script.py</span>
                                                    <span className="text-xs text-green-500"><i className="fas fa-check mr-1"></i>Verified</span>
                                                </div>
                                                <pre className="p-4 text-xs font-mono text-gray-300 overflow-x-auto custom-scroll flex-1">
                                                    {currentScenario.pythonCode}
                                                </pre>
                                            </div>
                                            <button className="mt-4 w-full py-3 bg-white border border-gray-300 rounded-xl text-gray-700 text-sm font-medium hover:bg-gray-50 transition-colors shadow-sm">
                                                <i className="fas fa-copy mr-2"></i> 复制代码到剪贴板
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>